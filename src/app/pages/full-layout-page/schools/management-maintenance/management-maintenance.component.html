<!-- =>Managment Maintanance Table1 Start -->
<div class="main-body-content p-3">
   <div class="outer-layout" style="padding-top:5px;">
      <div class="breadcrumbs c-black">
         <h6 class="url"><span class="flex-gap-right">Schools</span> <i class="fa fa-angle-right flex-gap-right" aria-hidden="true"></i> <span class="flex-gap-right" (click)="onCancel()">KGBV & ARS</span><i class="fa fa-angle-right flex-gap-right" aria-hidden="true"></i><span class="flex-gap-right">School Maintenance</span></h6>
      </div>
   </div >
   <p-card *ngIf="PageStage == 1">
      <!-- Table -->
      <p-confirmDialog [style]="{width: '36vw'}" [baseZIndex]="10000"></p-confirmDialog>
      <p-table #dt [columns]="student" [value]="Studentlist" editMode="row" [rows]="10" [paginator]="true" [resizableColumns]="true">
      <ng-template pTemplate="caption">
         <div class="row">
            <div class="col-md-12" style="text-align:right !important">
               <button type="button" pButton icon="fa fa-plus" label="Add" class="ui-button-info" (click)="onAddStudent()">
               </button>
            </div>
         </div>
      </ng-template>
      <ng-template pTemplate="header" let-distname>
         <tr class="text-center">
            <th class="sno-header-layout">#</th>
            <th *ngFor="let col of distname" [pSortableColumn]="col.field" [style.width]="col.widthstyle">
            {{col.header}}
            <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"> </p-sortIcon>
            </th>
         </tr>
      </ng-template>
      <ng-template pTemplate="header" let-distname>
         <tr class="text-center">
            <th class="sno-header-layout">#</th>
            <th *ngFor="let col of distname" [pSortableColumn]="col.field" [style.width]="col.widthstyle">
            {{col.header}}
            <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"> </p-sortIcon>
            </th>
         </tr>
      </ng-template>
      <ng-template pTemplate="body" let-Studentlist let-editing="editing" let-ri="rowIndex">
         <tr [pEditableRow]="Studentlist">
            <td class="sno-header-layous">{{ri+1}}</td>
            <!-- <td class="text-left">{{Studentlist.MantnceType}}</td> -->
            <td class="text-left">{{Studentlist.MantnceType == "1" ? "Building repair" : Studentlist.MantnceType == "2" ? "Equipment repair" : Studentlist.MantnceType == "3" ? "Other ": ""}}</td>
            <td class="text-left">{{Studentlist.Prblms}}</td>
            <td class="text-center">{{Studentlist.ReqAmt}}</td>
            <td class="text-left">{{Studentlist.Remrks}}</td>
            <!-- <td class="text-center">{{Studentlist.Stats}}</td> -->
            <td class="text-left">{{Studentlist.Stats == "0" ? "Hold" : Studentlist.Stats == "1" ? "Yet to be" : Studentlist.Stats == "2" ? "In progress": Studentlist.Stats == "3" ? "Completed": ""}}</td>
            <td style="text-align: center;">
               <button type="button" pButton icon="pi pi-pencil" label="Edit" class="ui-button-info buttonsize" style="cursor: pointer;" (click)="oneditstudendata(Studentlist.IndxID)"></button>
               <button pButton type="button" icon="fa fa-trash"  label="Delete" class="ui-button-warning deleteicon buttonsize" (click)="OnDeleteStudentData(Studentlist.IndxID)"></button>&nbsp;
               <button pButton pRipple type="button" icon="pi pi-pencil" label="Updates" class="p-button-success buttonsize"  (click)="gottonextpage(Studentlist.IndxID,Studentlist.MantnceType)"></button>
            </td>
         </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage" let-columns>
         <tr>
            <td [attr.colspan]="(columns.length)+1" style="text-align: center;">
               <strong>No Records Found </strong>
            </td>
         </tr>
      </ng-template>
      </p-table>
   </p-card>
   <!-- =>Managment Maintanance Table1 End -->
   <!-- =>Managment Maintanance Table2 Start -->
   <p-card  *ngIf="PageStage == 2">
      <!-- Table -->
      <p-confirmDialog [style]="{width: '36vw'}" [baseZIndex]="10000"></p-confirmDialog>
      <p-table #dt [columns]="studentstatus" [value]="Studentlistmanagementstatus" editMode="row" [rows]="10" [paginator]="true" [resizableColumns]="true">
      <ng-template pTemplate="caption">
         <div class="row">
            <div class="col-md-12" style="text-align:right !important">
               <button type="button" pButton icon="fa fa-plus" label="Add" class="ui-button-info" (click)="onAddStudentstatus()">
               </button>
            </div>
         </div>
      </ng-template>
      <ng-template pTemplate="header" let-distname>
         <tr class="text-center">
            <th class="sno-header-layout">#</th>
            <th *ngFor="let col of distname" [pSortableColumn]="col.field" [style.width]="col.widthstyle">
            {{col.header}}
            <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"> </p-sortIcon>
            </th>
         </tr>
      </ng-template>
      <ng-template pTemplate="header" let-distname>
         <tr class="text-center">
            <th class="sno-header-layout">#</th>
            <th *ngFor="let col of distname" [pSortableColumn]="col.field" [style.width]="col.widthstyle">
            {{col.header}}
            <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"> </p-sortIcon>
            </th>
         </tr>
      </ng-template>
      <ng-template pTemplate="body" let-Studentlist let-editing="editing" let-ri="rowIndex">
         <tr [pEditableRow]="Studentlist">
            <td class="sno-header-layous">{{ri+1}}</td>
            <!-- <td class="text-left">{{Studentlist.MantnceType}}</td> -->
            <td class="text-left">{{this.mainatanencetype == "1" ? "Building repair" : this.mainatanencetype == "2" ? "Equipment repair" : this.mainatanencetype == "3" ? "Other ": ""}}</td>
            <td class="text-left">{{Studentlist.Remrks}}</td>
            <!-- <td class="text-center">{{Studentlist.Stats}}</td> -->
            <td class="text-left">{{Studentlist.Stats == "0" ? "Hold" : Studentlist.Stats == "1" ? "Yet to be" : Studentlist.Stats == "2" ? "In progress": Studentlist.Stats == "3" ? "Completed": ""}}</td>
            <td style="text-align: center;">
               <button pButton pRipple type="button" icon="pi pi-pencil" label="Update" class="updatecolor buttonsize" (click)="gottonextpage3(Studentlist)"></button>
               <button pButton type="button" icon="fa fa-trash"  label="Delete" class="ui-button-warning deleteicon buttonsize" (click)="OnDeleteStudentDatastatus(Studentlist.IndxID)"></button>&nbsp;
            </td>
         </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage" let-columns>
         <tr>
            <td [attr.colspan]="(columns.length)+1" style="text-align: center;">
               <strong>No Records Found </strong>
            </td>
         </tr>
      </ng-template>
      </p-table>
   </p-card>
   <!-- =>Managment Maintanance Table2 End -->
   <!-- =>Managment Maintanance Form3 Start -->
   <p-card  *ngIf="PageStage == 3">
      <form [formGroup]="form2">
         <div class="row header">
           Updates
         </div>
         <div class="form-group row">
            <div class="col-lg-3 labelalign">
               <label>Remarks <span class="manditory">*</span></label>
               <input type="text" pInputText class="form-control"  formControlName="Remrks" placeholder="Enter the Remarks" > 
               <small class="form-text text-danger" *ngIf="!form2.get('Remrks').valid && (submit2 || form2.get('Remrks').dirty || form2.get('Remrks').touched)">
               Remarks Field is required</small>
            </div>
            <div class="col-lg-3 labelalign">
               <label>Status <span class="manditory">*</span></label>
               <p-dropdown [options]="statusType" formControlName="Stats" placeholder="Select Status" styleClass="dropdwnvalues"></p-dropdown>
               <small class="form-text text-danger" *ngIf="!form2.get('Stats').valid && (submit2 || form2.get('Stats').dirty || form2.get('Stats').touched)">
               Status Field is required</small>
            </div>
            <div class="col-lg-3 labelalign">
               <label>Photo<span class="manditory">*</span></label>
               <div>
                  <input #file type='file' (change)="onSelectFile($event,'photo')">
                  <div  *ngIf="viewuploadBtn">
                     <div class="col-md-12 p-0" >
                        <button type="submit" class="btn btn-info mt-2 mb-2" (click)="getUploadedFle()" >View Uploaded Photo</button>
                     </div>
                     <img src="{{image}}" class="uploaded-img" width="100" height="100" *ngIf="photoBtn1" > 
                  </div>
               </div>
               <small class="form-text text-danger" *ngIf="!form2.get('Photo').valid && (submit2 || form2.get('Photo').dirty || form2.get('Photo').touched)">
               Photo Upload Filed is required</small>
            </div>
         </div>
      </form>
      <div class="text-right mt-3">
         <button type="submit" class="btn btn-success" (click)="OnSaveForm2()">Save</button>
         <button type="submit " class="btn btn-light btn-border" (click)="onCancelback3()">Cancel</button> 
      </div>
   </p-card>
   <!-- =>Managment Maintanance Form3 End -->
</div>